/** @license MIT License (c) copyright 2013 original author or authors */

!function(n){n(["require","./when"],function(n){function t(n,t){return r(n,this,t)}function r(n,t,r){return o.all(r||[]).then(function(r){return f(function(i,c){var e=r.concat(a(i),a(c));n.apply(t,e)})})}function i(n){return r(n,this,h.call(arguments,1))}function c(n){var t=h.call(arguments,1);return function(){return r(n,this,t.concat(h.call(arguments)))}}function e(n,t){return function(){var r=this;return o.all(arguments).then(function(i){function c(c,e){var a,o;"callback"in t&&(a=u(i,t.callback)),"errback"in t&&(o=u(i,t.errback)),o<a?(l(i,o,e),l(i,a,c)):(l(i,a,c),l(i,o,e)),n.apply(r,i)}return f(c)})}}function u(n,t){return t<0?n.length+t+2:t}function l(n,t,r){null!=t&&(r=a(r),t<0&&(t=n.length+t+2),n.splice(t,0,r))}function a(n){return function(){arguments.length<=1?n.apply(this,arguments):n.call(this,h.call(arguments))}}var o,f,h;return o=n("./when"),f=o.promise,h=[].slice,{apply:t,call:i,lift:c,bind:c,promisify:e}})}("function"==typeof define&&define.amd?define:function(n){module.exports=n(require)});