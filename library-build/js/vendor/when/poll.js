/** @license MIT License (c) copyright 2012-2013 original author or authors */

!function(n){"use strict";n(["require","./when","./cancelable","./delay","./function"],function(n){function e(){}function t(n){e.prototype=n;var t=new e;return e.prototype=null,t}var o,r,u,i,c;return o=n("./when"),r=n("./cancelable"),u=n("./delay"),i=n("./function"),function(n,e,f,a){function l(n){s.resolve(n)}function p(n){i.apply(e).then(d,m),n!==c&&s.notify(n)}function d(){y||o(n(),function(n){o(f(n),function(e){return e?l(n):p(n)},function(){p(n)})},m)}var s,y,m;return y=!1,s=r(o.defer(),function(){y=!0}),m=s.reject,f=f||function(){return!1},"function"!=typeof e&&(e=function(n){return function(){return u(n)}}(e)),a?p():d(),s.promise=t(s.promise),s.promise.cancel=s.cancel,s.promise}})}("function"==typeof define&&define.amd?define:function(n){module.exports=n(require)});